!function(t){"use strict";function o(){var o=t(".todo__item:not(.todo__item--add)").length,e=t('.todo__item:not(.todo__item--add)[data-status="done"]').length;if(o>0)var a=100*e/o/100;else var a=0;t(".list__progress").css({"-webkit-transform":"scaleX("+a+")",transform:"scaleX("+a+")"})}function e(t,o,e){if(e&&""!=e)var e=e;else var e="";return'<div class="todo__item" data-id="'+t+'" data-status="'+e+'"><div class="todo__status"><div class="todo__check  js-toggle-status  js-status-done"><svg><use xlink:href="#ei-check-icon"></use></svg></div></div><div class="todo__name"><input class="todo__input  js-edit-todo" type="text" value="'+o+'"></div><div class="todo__option"><div class="todo__trash  js-remove-todo"><svg><use xlink:href="#ei-trash-icon"></use></svg></div></div></div>'}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&t("body").addClass("mobile");var a=t(".todo");!function(){var t=localStorage.getItem("todo");if(t&&""!=t){t=JSON.parse(t);var s="";for(var d in t)s+=e(d,t[d].note,t[d].status);a.prepend(s),o()}}(),function(){a.on("click",".js-toggle-status",function(){var e=t(this),a=e.parents(".todo__item").attr("data-id"),s=e.parents(".todo__item").attr("data-status"),d=JSON.parse(localStorage.getItem("todo"));if(e.hasClass("js-status-done")&&""==s)var i="done";else var i="";d[a].status=i,localStorage.setItem("todo",JSON.stringify(d)),e.parents(".todo__item").attr("data-status",i),o()})}(),function(){a.on("click",".js-remove-todo",function(){var e=t(this),s=e.parents(".todo__item").attr("data-id"),d=JSON.parse(localStorage.getItem("todo"));delete d[s],localStorage.setItem("todo",JSON.stringify(d)),e.parents(".todo__item").remove(),0==a.find(".todo__item:not(.todo__item--add)").length&&t(".js-add-todo").focus(),o()})}(),function(){a.on("keyup",".js-edit-todo",function(o){var e=t(this),a=e.parents(".todo__item").attr("data-id"),s=e.val(),d=JSON.parse(localStorage.getItem("todo"));d[a].note=s,localStorage.setItem("todo",JSON.stringify(d)),13==o.keyCode&&e.blur()})}(),function(){t(".js-add-todo").focus().on("change",function(){var s=t(this),d=s.val(),i=new Date,n=i.getTime(),r=localStorage.getItem("todo");r=r&&""!=r?JSON.parse(r):{},r[n]={note:d,status:""},localStorage.setItem("todo",JSON.stringify(r)),s.val(""),a.find(".todo__item--add").before(e(n,d)),t("body").scrollTop(1e6),o()}),t(".js-add-todo").focusin(function(){a.find(".todo__item--add").addClass("todo__item--focus")}),t(".js-add-todo").focusout(function(){a.find(".todo__item--add").removeClass("todo__item--focus")})}()}(jQuery);